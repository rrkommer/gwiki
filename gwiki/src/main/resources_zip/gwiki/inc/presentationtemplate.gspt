<% import de.micromata.genome.gwiki.page.impl.wiki.macros.*; %>
<@include file="inc/stdtags.gspt" @>
<@include file="inc/stdgfuncs.gspt" @>
<%
boolean editMode = wikiContext.getRequestParameter("editMode") != null; 
%>
<% if (editMode) { %>
<@include embedd="false" file="inc/naked/standardhead"@>
<% } else { %>
<@include embedd="false" file="inc/naked/head"@>
<script src='<gwiki:url value="/static/js/jquery.contextmenu.js"/>' type="text/javascript"></script>
<div id="editmenu" style="font-size:0.7em;display:none;width:300px;background-color:white;border:1px solid black;padding:5px;">
<%	GWikiScrollNextPrevPageMacro  nm = new GWikiScrollNextPrevPageMacro(">>>>", false);
	nm.renderImpl(wikiContext, null);
%>&nbsp;&nbsp;
 <% nm = new GWikiScrollNextPrevPageMacro("<<<<", true);
 		nm.renderImpl(wikiContext, null);
 %>
 	<hr></hr>
 <%if (wikiContext.wikiWeb.authorization.isAllowToEdit(wikiContext, wikiPage.elementInfo) == true) { %>
		<gwiki:link pageId="edit/EditPage" title="I{gwiki.page.headmenu.page.edit}" urlParams="?pageId=${wikiPage.elementInfo.id}"/><br/>
<% } %>
	<gwiki:link pageId="${wikiContext.wikiElement.elementInfo.parentId}"/>
	<hr></hr>
	<%
	directChilds = wikiContext.getElementFinder().getDirectChilds(wikiPage.elementInfo.getParent(wikiContext));
	for (child in directChilds) {
		wikiContext.append(wikiContext.renderLocalUrl(child.id, null, null) + "<br/>");	
	}
	%>
</div>
<script>
\$(document).ready(function(){
	$('#presentationlayer').contextMenu('#editmenu');
	$('#presentationtitle').contextMenu('#editmenu');
});
</script>
<% nextSibl = GWikiScrollNextPrevPageMacro.getNextSilbling(wikiContext, null); %>

<h1 id="presentationtitle" <% if (nextSibl != null) { %> ondblclick="document.location.href='<%= wikiContext.localUrl(nextSibl.id) %>';" <%}%> style="font-size:2.0em;text-align: center;"><%= esc(wikiContext.getTranslatedProp(wikiPage.elementInfo.title)) %></h1>
<div <% if (nextSibl != null) { %> ondblclick="document.location.href='<%= wikiContext.localUrl(nextSibl.id) %>';" <%}%>  id="presentationlayer" style="font-size:2.0em">
<% } %>
<%
	MainPage.render(wikiContext);
%>
<% if (editMode) { %>
<@include embedd="false" file="inc/naked/standardfoot"@>
<% } else { %>
</div>
<@include embedd="false" file="inc/naked/footer"@>
<% } %>