<% wikiContext.skinInclude('standardhead'); %>
<@include file="inc/stdtags.gspt" @>

<c:choose>
  <c:when test="${form.validUser}">
    <p>Sie k&ouml;nnen Sich bei &Auml;nderungen an der Seite
    automatisch eine Email zusenden lassen.</p>
    <form id="mainform" method="post">Seite <gwiki:link
      pageId="${form.pageId}" /> Abonieren. <gwiki:hidden property="pageId" />
    <gwiki:hidden styleId="chPageId" property="delPageId" /> <input
      type="hidden" id="formcommand" name="command" /> <c:choose>
      <c:when test="${form.alreadyRegistered}">
        <input type="submit" name="method_onUnregister" value="Abo aufheben" />
      </c:when>
      <c:otherwise>
        <gwiki:checkbox property="recursive" /> Recursive<br />
        <input type="submit" name="method_onRegister" value="Abonieren" />
      </c:otherwise>
    </c:choose></form>

    <hr></hr>
    <script>
function submitDelete(myId)
{
  //document.getElementById('chPageId').value = myId;
  jQuery('#chPageId').val(myId);
  jQuery('#formcommand').attr('name', 'method_onUnregisterSel');
  jQuery('#mainform').submit();
}
</script>
Bestehende Notifications f&uuml;r <c:out value="${form.userName}" />:
<table border="1" cellpadding="2" cellspacing="0">
      <tr>
        <th>PageId</th>
        <th>Titel</th>
        <th>Rekursiv</th>
        </ht>
        <th>&nbsp;</th>
      </tr>
      <% for (me in pageContext.request.getAttribute("form").registerdNotifications.entrySet()) { 
  pageContext.request.setAttribute("me", me);
%>
      <tr>
        <td><c:out value="${me.key}" /></td>
        <td><c:out value="${me.value.first}" /></td>
        <td><c:out value="${me.value.second}" /></td>
        <td><a
          href="javascript:submitDelete('<c:out value="${me.key}"/>'); ">Abo
        aufheben</a></td>
      </tr>
      <% } %>
    </table>
  </c:when>
  <c:otherwise>
Zur&uuml;ck <gwiki:url value="${form.pageId}" />.
</c:otherwise>
</c:choose>

<% wikiContext.skinInclude('standardfoot'); %>
